/* ==========================================================================
   CCN Service Quote – Tabs del notebook
   Mantiene visible el color del estado en TODOS los tabs (activos/inactivos).
   Requiere que el JS agregue:
     - en <li>:    .ccn-tab-angle + (ccn-status-filled|ccn-status-ack|ccn-status-empty)
     - en <a.nav-link>: mismas clases de estado
   ========================================================================== */

:root {
  --ccn-ok:    #16a34a;
  --ccn-warn:  #ca8a04;
  --ccn-empty: #dc2626;
}

/* --- Base notebook/tabs --- */
.o_notebook {
  .nav-tabs {
    /* Evita saltos por el borde superior que agregamos nosotros */
    > li {
      margin-top: 3px;
    }

    /* ===============================================================
       Opción A (recomendada): Indicador como BORDE SUPERIOR en el <li>
       =============================================================== */
    li.ccn-tab-angle {
      border-top: 3px solid transparent;
      transition: border-color .15s ease;
    }
    li.ccn-tab-angle.ccn-status-filled { border-top-color: var(--ccn-ok); }
    li.ccn-tab-angle.ccn-status-ack    { border-top-color: var(--ccn-warn); }
    li.ccn-tab-angle.ccn-status-empty  { border-top-color: var(--ccn-empty); }

    /* ===============================================================
       Opción B (complementaria): “Bullet” de color en el <a.nav-link>
       =============================================================== */
    .nav-link {
      position: relative;
      padding-left: 1.4rem; /* espacio para el bullet */

      &.ccn-status-filled,
      &.ccn-status-ack,
      &.ccn-status-empty {
        /* color del texto (inactivo) por estado */
        color: currentColor;
      }

      /* Bullet visible siempre (activo/inactivo) */
      &.ccn-status-filled::before,
      &.ccn-status-ack::before,
      &.ccn-status-empty::before {
        content: "";
        position: absolute;
        left: .5rem; top: 50%;
        width: 8px; height: 8px;
        border-radius: 999px;
        transform: translateY(-50%);
        background: currentColor;
        box-shadow: 0 0 0 2px rgba(0,0,0,.15) inset;
      }
    }

    /* Colorea el texto del tab inactivo según estado (más visible) */
    .nav-link.ccn-status-filled:not(.active) { color: var(--ccn-ok) !important; }
    .nav-link.ccn-status-ack:not(.active)    { color: var(--ccn-warn) !important; }
    .nav-link.ccn-status-empty:not(.active)  { color: var(--ccn-empty) !important; }

    /* En el ACTIVO, deja el estilo de Bootstrap pero muestra el bullet y el borde */
    .nav-link.active.ccn-status-filled { /* opcional: reforzar tono */ }
    .nav-link.active.ccn-status-ack    { /* opcional */ }
    .nav-link.active.ccn-status-empty  { /* opcional */ }
  }

  /* (Opcional) Línea inferior del tab activo, sin interferir con nuestro borde superior */
  .nav-tabs .nav-link.active {
    border-top-color: transparent; /* dejamos que nuestro borde “hable” */
  }
}

/* ===============================================================
   Fallback: si por algún motivo el <li> NO recibe .ccn-tab-angle,
   aplica un subrayado coloreado directamente al <a.nav-link>.
   =============================================================== */
.o_notebook .nav-tabs .nav-link.ccn-status-filled {
  box-shadow: inset 0 -2px 0 0 var(--ccn-ok);
}
.o_notebook .nav-tabs .nav-link.ccn-status-ack {
  box-shadow: inset 0 -2px 0 0 var(--ccn-warn);
}
.o_notebook .nav-tabs .nav-link.ccn-status-empty {
  box-shadow: inset 0 -2px 0 0 var(--ccn-empty);
}
