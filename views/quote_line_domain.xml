<?xml version="1.0" encoding="utf-8"?>
<odoo>
  <data>
    <record id="ccn_view_quote_form_filter_products" model="ir.ui.view">
      <field name="name">ccn.quote.form.filter.products</field>
      <field name="model">ccn.service.quote</field>
      <field name="inherit_id" ref="ccn_service_quote.ccn_view_quote_form"/>
      <field name="arch" type="xml">
        <xpath expr="//form//field[@name='line_ids']" position="replace">
          <field name="line_ids">
            <list editable="bottom">
              <field name="rubro_id"/>

              <field name="product_id"
                     domain="[('sale_ok','=',True),
                              ('product_tmpl_id.ccn_exclude_from_quote','=',False),
                              ('product_tmpl_id.ccn_rubro_ids','in',[rubro_id])]"
                     options="{'no_create_edit': True, 'no_quick_create': True}"/>

              <field name="quantity"/>
              <field name="base_price_unit"/>

              <!-- Columna Tabulador (nuevo campo) -->
              <field name="tabulador"/>

              <field name="price_unit_final"/>
              <field name="total_price" readonly="1"/>
            </list>
          </field>
        </xpath>
      </field>
    </record>
  </data>
</odoo>
